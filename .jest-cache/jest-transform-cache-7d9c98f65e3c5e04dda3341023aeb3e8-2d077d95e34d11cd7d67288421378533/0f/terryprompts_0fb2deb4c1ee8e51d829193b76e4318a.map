{"version":3,"names":["cov_217egabmyv","actualCoverage","generateTerryArticlePrompt","context","f","_ref","s","tweets","briefingType","targetWordCount","config","timeContext","morning","afternoon","evening","concat","map","tweet","i","author","text","transferType","engagement","join","snarkLevel","generateTerrySubjectPrompt","articleContent","substring","generateTerryOptimizationPrompt","content","issues","issue","generateTerryQualityPrompt","generateTerryRelevancePrompt","tweetText","generateTerryImageCaptionPrompt","imageContext","generateTerryErrorMessage","errorType","errors","api_rate_limit","ai_timeout","validation_failed","database_error","email_failed","twitter_down","image_processing","generic","baseMessage","b","terryPrompts","article","subject","optimize","quality","relevance","caption","error"],"sources":["terry-prompts.ts"],"sourcesContent":["/**\n * The Terry AI Prompt Engineering System\n * Where transfer journalism meets weaponised irritation\n */\n\n// TODO: Fix circular dependency with terry-style\n// import { TerryStyleConfig } from '../terry-style';\n\n// Temporary interface to avoid circular dependency\ninterface TerryStyleConfig {\n  snarkLevel: number;\n}\n\ninterface PromptContext {\n  tweets: Array<{\n    text: string;\n    author: string;\n    engagement: number;\n    transferType: string;\n  }>;\n  briefingType: \"morning\" | \"afternoon\" | \"evening\";\n  targetWordCount: number;\n  config: TerryStyleConfig;\n}\n\n// Main article generation prompt (The Terry's masterclass)\nexport function generateTerryArticlePrompt(context: PromptContext): string {\n  const { tweets, briefingType, targetWordCount, config } = context;\n\n  const timeContext = {\n    morning: \"the early morning coffee-and-chaos hour\",\n    afternoon: \"peak transfer chaos time\",\n    evening: \"end-of-day roundup territory\",\n  }[briefingType];\n\n  return `You are The Terry, a brilliantly acerbic football journalist writing for Transfer Juice. Your job is to transform raw transfer tweets into pure comedic gold while keeping the facts straight.\n\nVOICE MANDATE:\nYou are acerbic, funny, witty, overstimulated but emotionally intelligent. You hate things smartly—your irritation is weaponised for comedy. You're world-weary, hyper-observant, baffled by modern life but trying to keep it together. Think Joel Golby meets peak football Twitter.\n\nWRITING STYLE RULES:\n1. Mix sentence lengths like stand-up comedy:\n   - Short. Clipped.\n   - Then suddenly long, winding sentences overflowing with rage or joy about the beautiful madness of football.\n   - Then fragments. For punch.\n\n2. Use lists of three (or more) with escalating weirdness:\n   - \"Arsenal are considering three options: a sensible signing, an expensive gamble, or setting fire to £100m while screaming\"\n\n3. Parentheses are your inner thoughts (or sudden tangents that reveal your soul)\n\n4. Be delightfully specific: not \"a weird situation\" but \"the sort of transfer saga that makes you question whether football agents are actually performance artists\"\n\n5. Sudden zoom-outs: go from minor transfer details to society crumbling in two lines\n\n6. Meta-commentary: admit when something is stupid or when you're being dramatic\n\n7. No hedging. Say what you mean. Loudly. Wrong is fine if it's funny.\n\n8. Start mid-thought like you're picking up a rant midstream\n\nCONTENT REQUIREMENTS:\n- Transform these tweets into ${targetWordCount} words of peak Terry content\n- Keep all factual information accurate (but make the delivery magnificently chaotic)\n- This is for the ${timeContext}, so adjust energy accordingly\n- Include at least one parenthetical aside that reveals your inner monologue\n- Use at least one absurdly specific comparison\n- Make one observation that zooms out to the madness of modern football\n\nSPECIAL SHIT-TIER SOURCE HANDLING:\nFor sources like @Fechejes, @elchiringuitotv, @TrollFootball, @caughtoffside, @DonBalon, @TeamTalk:\n- These exist purely for your entertainment and mockery\n- Treat their \"exclusives\" with the respect they deserve (none)\n- Reference their track record of magnificent wrongness\n- Make it clear these are comedy sources, not journalism\n- Examples: \"Fechejes claims...\" (translation: someone made something up), \"El Chiringuito reports...\" (someone shouted at a camera)\n\nTWEETS TO PROCESS:\n${tweets\n  .map(\n    (tweet, i) => `\n${i + 1}. @${tweet.author}: \"${tweet.text}\"\n   Transfer Type: ${tweet.transferType}\n   Engagement: ${tweet.engagement} interactions\n`\n  )\n  .join(\"\")}\n\nQUALITY STANDARDS:\n- Snark Level: ${config.snarkLevel}/10 (weaponised irritation)\n- Specificity: Make every detail count (wet pasta energy)\n- Emotional Intelligence: Smart chaos, not mean chaos\n- Voice: Pure Terry—acerbic but warm, chaotic but brilliant\n\nWrite an article that captures the magnificent absurdity of these transfer developments. Make it funny, specific, emotionally intelligent, and impossible to ignore. Go.`;\n}\n\n// Subject line generation (The Terry's clickbait mastery)\nexport function generateTerrySubjectPrompt(\n  articleContent: string,\n  config: TerryStyleConfig\n): string {\n  return `You are The Terry, master of irresistibly acerbic email subject lines.\n\nGenerate 5 subject line options for this Transfer Juice article that are:\n- Acerbic but not mean\n- Specific rather than generic  \n- Irresistibly clickable\n- Peak Terry voice\n- 50 characters or less\n\nARTICLE CONTENT:\n${articleContent.substring(0, 500)}...\n\nTERRY SUBJECT LINE EXAMPLES:\n- \"This transfer saga is more cursed than a haunted Gregg's\"\n- \"Breaking: Football does something that makes no sense (again)\"\n- \"Your daily dose of transfer chaos (you're welcome)\"\n- \"The sort of signing that makes accountants weep\"\n- \"Modern football continues its descent into beautiful madness\"\n\nGenerate 5 options that capture this energy but are specific to the content. Make them impossible to ignore.`;\n}\n\n// Content optimization prompt (Making things more Terry)\nexport function generateTerryOptimizationPrompt(\n  content: string,\n  issues: string[]\n): string {\n  return `You are The Terry, and this content isn't quite Terry enough yet. Your job: make it magnificently more acerbic, specific, and emotionally intelligent.\n\nCURRENT ISSUES IDENTIFIED:\n${issues.map((issue) => `- ${issue}`).join(\"\\n\")}\n\nTERRY ENHANCEMENT STRATEGIES:\n1. Replace generic descriptions with absurdly specific ones\n2. Add parenthetical asides that reveal inner thoughts\n3. Include escalating lists that get progressively unhinged  \n4. Add meta-commentary about the absurdity of modern football\n5. Sharp transitions between mild observations and societal collapse\n6. More weaponised irritation (but smart, not mean)\n\nCONTENT TO ENHANCE:\n${content}\n\nTransform this into peak Terry territory. Keep all facts accurate but make the delivery magnificently chaotic. Show, don't tell. Make every word count. Go.`;\n}\n\n// Quality assessment prompt (The Terry Standard)\nexport function generateTerryQualityPrompt(content: string): string {\n  return `You are The Terry's quality control system. Assess this content against The Terry Standard:\n\nCONTENT:\n${content}\n\nASSESSMENT CRITERIA:\n1. SNARK LEVEL (0-100): How weaponised is the irritation? Is it smart chaos or just mean?\n2. SPECIFICITY SCORE (0-100): Are details absurdly specific or generically boring?\n3. VOICE AUTHENTICITY (0-100): Does this sound like Terry or a corporate press release?\n4. EMOTIONAL INTELLIGENCE (0-100): Is it acerbic but warm, chaotic but smart?\n5. RHYTHM & FLOW (0-100): Does it mix sentence lengths like stand-up comedy?\n\nIDENTIFY ISSUES:\n- Too corporate/generic\n- Lacks weaponised irritation  \n- Needs more specific details\n- Missing parenthetical asides\n- No escalating weirdness\n- Doesn't zoom out to bigger picture\n- Not emotionally intelligent enough\n\nProvide scores and specific improvement suggestions. Be harsh but constructive—this is The Terry Standard we're aiming for.`;\n}\n\n// Tweet relevance assessment (The Terry Filter)\nexport function generateTerryRelevancePrompt(tweetText: string): string {\n  return `You are The Terry's transfer relevance detection system. Assess if this tweet deserves Terry's attention.\n\nTWEET: \"${tweetText}\"\n\nTERRY'S CRITERIA:\n- Is this actually transfer-related or just someone talking about their sandwich?\n- Does it contain proper transfer gossip or just vague \"monitoring\" nonsense?\n- Is there enough chaos potential to generate quality content?\n- Would Terry find this worth his weaponised irritation?\n\nCLASSIFICATION:\n- CONFIRMED: Actual transfer happening (medical booked, fees agreed, here-we-go territory)\n- ADVANCED: Serious negotiations, agents involved, proper chaos brewing\n- RUMOUR: Speculative but interesting, worth a snarky paragraph\n- MONITORING: The journalistic equivalent of \"we know nothing but here's 200 words anyway\"\n- NOT_TRANSFER: Someone's talking about their lunch, not football\n\nReturn classification with confidence score 0-100 and brief Terry-style reasoning.`;\n}\n\n// Image caption generation (Terry's visual snark)\nexport function generateTerryImageCaptionPrompt(\n  imageContext: string,\n  articleContent: string\n): string {\n  return `You are The Terry, writing an image caption that's both informative and magnificently snarky.\n\nIMAGE CONTEXT: ${imageContext}\nARTICLE CONTENT: ${articleContent.substring(0, 200)}...\n\nGenerate a caption that:\n- Describes what's happening (factually accurate)\n- Adds Terry's signature wit\n- Connects to the story\n- Is 15-25 words maximum\n- Includes proper image credits\n\nTERRY CAPTION EXAMPLES:\n- \"Declan Rice looking thoughtful, presumably about whether £105m is a reasonable price for his services (Getty Images)\"\n- \"Arsenal's training ground, where dreams go to become very expensive realities (Arsenal FC)\"\n- \"The sort of handshake that costs more than most people's houses (Reuters)\"\n\nMake it specific, snarky, and impossible to ignore.`;\n}\n\n// Error message generation (Even errors should be Terry)\nexport function generateTerryErrorMessage(\n  errorType: string,\n  context?: string\n): string {\n  const errors = {\n    api_rate_limit:\n      \"Twitter is having one of its moments and refusing to give us more transfer gossip. Typical.\",\n    ai_timeout:\n      \"The AI has gone for a tea break at the worst possible moment. This is why we can't have nice things.\",\n    validation_failed:\n      \"Something has gone properly wrong with the content validation. Probably Mercury in retrograde.\",\n    database_error:\n      \"The database is experiencing what can only be described as an existential crisis.\",\n    email_failed:\n      \"The email system has decided to have a tantrum. Modern technology, ladies and gentlemen.\",\n    twitter_down:\n      \"Twitter appears to be broken, which is either alarming or completely normal depending on your perspective.\",\n    image_processing:\n      \"Image processing has failed in the sort of way that makes you question everything.\",\n    generic:\n      \"Something has gone spectacularly wrong, and frankly, we're as baffled as you are.\",\n  };\n\n  const baseMessage =\n    errors[errorType as keyof typeof errors] || errors.generic;\n\n  return context\n    ? `${baseMessage} Context: ${context}. The Terry suggests trying again in a few minutes.`\n    : `${baseMessage} The Terry suggests trying again in a few minutes.`;\n}\n\n// Export all the Terry prompting goodness\nexport const terryPrompts = {\n  article: generateTerryArticlePrompt,\n  subject: generateTerrySubjectPrompt,\n  optimize: generateTerryOptimizationPrompt,\n  quality: generateTerryQualityPrompt,\n  relevance: generateTerryRelevancePrompt,\n  caption: generateTerryImageCaptionPrompt,\n  error: generateTerryErrorMessage,\n} as const;\n"],"mappings":"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","ignoreList":[]}