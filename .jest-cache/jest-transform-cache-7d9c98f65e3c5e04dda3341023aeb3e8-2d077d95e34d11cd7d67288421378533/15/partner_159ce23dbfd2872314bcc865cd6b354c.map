{"version":3,"names":["cov_1p82ucm69j","actualCoverage","_regenerator","e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","w","m","defineProperty","_regeneratorDefine","enumerable","configurable","writable","_invoke","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","_arrayLikeToArray","toString","slice","constructor","name","Array","from","test","isArray","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","contentMixer","prisma","mixPartnerContent","_x","_x2","_x3","_mixPartnerContent","_callee","sections","feedItems","timestamp","mixingDecision","partnerContent","partnerSection","updatedSections","_t","_context","s","shouldMixPartnerContent","shouldMixContent","b","console","log","concat","reason","getSuggestedContent","createPartnerSection","insertPartnerSection","trackPartnerContentAdded","savePartnerContentUsage","error","_x4","_createPartnerSection","_callee2","terryIntro","_context2","generatePartnerIntro","id","type","title","content","source","attribution_format","replace","url","metadata","partnerAttribution","intros","intro","Math","floor","random","sourceCommentary","sportbible","commentary","outroIndex","findIndex","insertIndex","introIndex","_x5","_x6","_savePartnerContentUsage","_callee3","briefingTimestamp","_t2","_context3","data","sourceId","publishedAt","category","tags","usedAt","Date","getPartnerContentAnalytics","_x7","_getPartnerContentAnalytics","_callee4","briefingId","briefing","hasPartnerContent","mixerAnalytics","_context4","findUnique","where","include","_count","select","Error","some","section","getAnalytics","feedItemCount","wasQuietPeriod","partnerContentStats"],"sources":["partner.ts"],"sourcesContent":["/**\n * Partner Content Integration for Briefings\n * Mixes partner content during quiet transfer periods\n */\n\nimport { contentMixer } from \"@/lib/partnerships/contentMixer\";\nimport type { BriefingSection } from \"@/types/briefing\";\nimport { prisma } from \"@/lib/prisma\";\n\n/**\n * Mix partner content into briefing sections\n */\nexport async function mixPartnerContent(\n  sections: BriefingSection[],\n  feedItems: any[],\n  timestamp: Date\n): Promise<BriefingSection[]> {\n  // Check if we should mix content\n  const mixingDecision = contentMixer.shouldMixPartnerContent(\n    feedItems,\n    timestamp\n  );\n\n  if (!mixingDecision.shouldMixContent) {\n    console.log(`üì∞ Partner content not needed: ${mixingDecision.reason}`);\n    return sections;\n  }\n\n  console.log(`üì∞ Mixing partner content: ${mixingDecision.reason}`);\n\n  try {\n    // Get suggested partner content\n    const partnerContent = await contentMixer.getSuggestedContent(\n      feedItems,\n      [\"entertainment\", \"analysis\"] // Prefer these during quiet periods\n    );\n\n    if (!partnerContent) {\n      console.log(\"üì∞ No suitable partner content found\");\n      return sections;\n    }\n\n    // Convert to briefing section\n    const partnerSection = await createPartnerSection(partnerContent);\n\n    // Insert partner section strategically\n    const updatedSections = insertPartnerSection(sections, partnerSection);\n\n    // Track that we used this content\n    contentMixer.trackPartnerContentAdded(partnerContent);\n\n    // Save to database for tracking\n    await savePartnerContentUsage(partnerContent, timestamp);\n\n    return updatedSections;\n  } catch (error) {\n    console.error(\"‚ùå Failed to mix partner content:\", error);\n    return sections; // Return original sections on error\n  }\n}\n\n/**\n * Create briefing section from partner content\n */\nasync function createPartnerSection(\n  partnerContent: any\n): Promise<BriefingSection> {\n  // Generate Terry's introduction to the partner content\n  const terryIntro = generatePartnerIntro(partnerContent);\n\n  return {\n    id: `partner-${partnerContent.id}`,\n    type: \"partner\",\n    title: \"Meanwhile, In Football Land...\",\n    content: `\n      ${terryIntro}\n      <blockquote class=\"partner-content\">\n        <h4>${partnerContent.title}</h4>\n        <p>${partnerContent.content}</p>\n        <cite>${partnerContent.source.attribution_format\n          .replace(\"{source}\", partnerContent.source.name)\n          .replace(\n            \"{website}\",\n            `<a href=\"${partnerContent.url}\" target=\"_blank\" rel=\"noopener noreferrer\">${partnerContent.url}</a>`\n          )}</cite>\n      </blockquote>\n    `,\n    metadata: {\n      partnerAttribution: partnerContent.source.attribution_format\n        .replace(\"{source}\", partnerContent.source.name)\n        .replace(\"{website}\", partnerContent.url),\n    },\n  };\n}\n\n/**\n * Generate Terry's intro to partner content\n */\nfunction generatePartnerIntro(partnerContent: any): string {\n  const intros = [\n    \"Right, while we wait for actual transfer news to materialize from the ether,\",\n    \"In the brief respite from ITK nonsense,\",\n    \"During this moment of blessed transfer silence,\",\n    \"While the rumour mill takes a quick breather,\",\n    \"As we endure another quiet spell in the chaos,\",\n  ];\n\n  const intro = intros[Math.floor(Math.random() * intros.length)];\n\n  // Add source-specific commentary\n  const sourceCommentary = {\n    \"the-upshot-podcast\":\n      \"the lads at The Upshot have uncovered another absolute belter:\",\n    sportbible: \"SportBible's found something properly mental:\",\n    \"planet-football\": \"Planet Football's dug up this gem:\",\n    \"football-culture-movement\":\n      \"Football Culture Movement's gone deep on this one:\",\n    \"athletico-mince\": \"Bob Mortimer's been at it again:\",\n  };\n\n  const commentary =\n    sourceCommentary[\n      partnerContent.source.id as keyof typeof sourceCommentary\n    ] || `${partnerContent.source.name} has this to share:`;\n\n  return `<p class=\"terry-intro\">${intro} ${commentary}</p>`;\n}\n\n/**\n * Insert partner section into briefing\n */\nfunction insertPartnerSection(\n  sections: BriefingSection[],\n  partnerSection: BriefingSection\n): BriefingSection[] {\n  // Find optimal position for partner content\n  // Usually after main transfer news but before outro\n\n  const outroIndex = sections.findIndex((s) => s.type === \"outro\");\n  const insertIndex = outroIndex > -1 ? outroIndex : sections.length;\n\n  // If we have very few sections, insert after intro\n  if (sections.length <= 3) {\n    const introIndex = sections.findIndex((s) => s.type === \"intro\");\n    if (introIndex > -1) {\n      return [\n        ...sections.slice(0, introIndex + 1),\n        partnerSection,\n        ...sections.slice(introIndex + 1),\n      ];\n    }\n  }\n\n  // Otherwise insert before outro\n  return [\n    ...sections.slice(0, insertIndex),\n    partnerSection,\n    ...sections.slice(insertIndex),\n  ];\n}\n\n/**\n * Save partner content usage to database\n */\nasync function savePartnerContentUsage(\n  partnerContent: any,\n  briefingTimestamp: Date\n): Promise<void> {\n  try {\n    await prisma.partnerContent.create({\n      data: {\n        sourceId: partnerContent.source.id,\n        title: partnerContent.title,\n        content: partnerContent.content,\n        url: partnerContent.url,\n        publishedAt: partnerContent.publishedAt,\n        category: partnerContent.category,\n        tags: partnerContent.tags,\n        usedAt: new Date(),\n        // We'll link to briefing once it's created\n      },\n    });\n  } catch (error) {\n    console.error(\"Failed to save partner content usage:\", error);\n  }\n}\n\n/**\n * Get partner content analytics for a briefing\n */\nexport async function getPartnerContentAnalytics(\n  briefingId: string\n): Promise<PartnerContentAnalytics> {\n  const briefing = await prisma.briefing.findUnique({\n    where: { id: briefingId },\n    include: {\n      _count: {\n        select: {\n          feedItems: true,\n        },\n      },\n    },\n  });\n\n  if (!briefing) {\n    throw new Error(\"Briefing not found\");\n  }\n\n  // Check if briefing has partner content\n  const hasPartnerContent = (briefing.content as any[]).some(\n    (section) => section.type === \"partner\"\n  );\n\n  // Get mixing analytics from content mixer\n  const mixerAnalytics = contentMixer.getAnalytics();\n\n  return {\n    hasPartnerContent,\n    feedItemCount: briefing._count.feedItems,\n    wasQuietPeriod: briefing._count.feedItems < 5,\n    partnerContentStats: mixerAnalytics,\n  };\n}\n\n// Type definitions\n\ninterface PartnerContentAnalytics {\n  hasPartnerContent: boolean;\n  feedItemCount: number;\n  wasQuietPeriod: boolean;\n  partnerContentStats: any;\n}\n"],"mappings":"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","ignoreList":[]}